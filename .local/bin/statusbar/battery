#!/bin/sh

# Loops through all batteries and puts
# correct emoji/fa icon.

case $BLOCK_BUTTON in
	2) notify-send "ğŸ”‹ Battery module" "ğŸ”‹: discharging
ğŸ›‘: not charging
â™»: stagnant charge
ğŸ”Œ: charging
âš¡: charged
â—: battery very low!" ;;
	6) setsif -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

# Loop through all attached batteries.
for battery in /sys/class/power_supply/BAT?; do
	capacity=$(cat "$battery"/capacity) || break
	status=$(sed "s/[Dd]ischarging/dis/;s/[Nn]ot charging/ğŸ›‘/;s/[Cc]harging/ğŸ”Œ/;s/[Uu]nknown/â™»/;s/[Ff]ull/âš¡/" "$battery"/status)

	[ $status = "dis" ] && {
		[ $capacity -le 100 ] && status="ï‰€"
		[ $capacity -le 80 ] && status="ï‰"
		[ $capacity -le 60 ] && status="ï‰‚"
		[ $capacity -le 30 ] && status="ï‰ƒ" && warn="â—"
		[ $capacity -le 10 ] && status="ï‰„"; }

	printf "%s%s%s%% " "$status" "$warn" "$capacity"
done | sed 's/ $//'
